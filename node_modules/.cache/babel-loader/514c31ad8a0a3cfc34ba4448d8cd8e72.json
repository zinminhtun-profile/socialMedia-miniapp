{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\n\nconst API = async (url, abortSignal) => {\n  const response = await fetch(url, {\n    signal: abortSignal\n  });\n  return response.json();\n};\n\n_c = API;\nexport const useStateAPI = url => {\n  _s();\n\n  const [name, setName] = React.useState(null);\n  const [profile, setProfile] = React.useState(null);\n  const [biography, setBiography] = React.useState(null);\n  const [external_url, setExternal_url] = React.useState(null);\n  React.useEffect(() => {\n    // This is the abort controller that will cancel the fetch if the component was unmounted\n    const controller = new AbortController();\n    const signal = controller.signal;\n    let mounted = true;\n\n    const fetchData = async () => {\n      try {\n        const data = await API(url, signal);\n        setName(data.graphql.user.username);\n        setProfile(data.graphql.user.profile_pic_url);\n        setBiography(data.graphql.user.biography);\n        setExternal_url(data.graphql.user.external_url);\n      } catch (e) {\n        console.log(e);\n      }\n    }; // it will fetch data only on mount so that\n\n\n    if (mounted) {\n      fetchData();\n    }\n\n    return () => {\n      mounted = false;\n      controller.abort();\n    };\n  }, [url]);\n  const userData = {\n    name,\n    profile,\n    biography,\n    external_url\n  };\n  return userData;\n};\n\n_s(useStateAPI, \"Ik9JfTDelrF0zDGj+dgQbY34Ec4=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"API\");","map":{"version":3,"sources":["/home/winechan/React-boot-Project/socialMedia-miniapp/src/api.js"],"names":["React","API","url","abortSignal","response","fetch","signal","json","useStateAPI","name","setName","useState","profile","setProfile","biography","setBiography","external_url","setExternal_url","useEffect","controller","AbortController","mounted","fetchData","data","graphql","user","username","profile_pic_url","e","console","log","abort","userData"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,GAAG,GAAG,OAAOC,GAAP,EAAYC,WAAZ,KAA4B;AACpC,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAD,EAAM;AAAEI,IAAAA,MAAM,EAAEH;AAAV,GAAN,CAA5B;AACA,SAAOC,QAAQ,CAACG,IAAT,EAAP;AACD,CAHH;;KAAMN,G;AAKN,OAAO,MAAMO,WAAW,GAAIN,GAAD,IAAS;AAAA;;AAChC,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBV,KAAK,CAACW,QAAN,CAAe,IAAf,CAAxB;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBb,KAAK,CAACW,QAAN,CAAe,IAAf,CAA9B;AACA,QAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4Bf,KAAK,CAACW,QAAN,CAAe,IAAf,CAAlC;AACA,QAAM,CAACK,YAAD,EAAeC,eAAf,IAAkCjB,KAAK,CAACW,QAAN,CAAe,IAAf,CAAxC;AACAX,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAM;AACpB;AACA,UAAMC,UAAU,GAAG,IAAIC,eAAJ,EAAnB;AACA,UAAMd,MAAM,GAAGa,UAAU,CAACb,MAA1B;AAEA,QAAIe,OAAO,GAAG,IAAd;;AAEA,UAAMC,SAAS,GAAG,YAAY;AAC5B,UAAI;AACF,cAAMC,IAAI,GAAG,MAAMtB,GAAG,CAACC,GAAD,EAAMI,MAAN,CAAtB;AACAI,QAAAA,OAAO,CAACa,IAAI,CAACC,OAAL,CAAaC,IAAb,CAAkBC,QAAnB,CAAP;AACAb,QAAAA,UAAU,CAACU,IAAI,CAACC,OAAL,CAAaC,IAAb,CAAkBE,eAAnB,CAAV;AACAZ,QAAAA,YAAY,CAACQ,IAAI,CAACC,OAAL,CAAaC,IAAb,CAAkBX,SAAnB,CAAZ;AACAG,QAAAA,eAAe,CAACM,IAAI,CAACC,OAAL,CAAaC,IAAb,CAAkBT,YAAnB,CAAf;AACD,OAND,CAME,OAAOY,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACF,KAVD,CAPoB,CAkBpB;;;AACA,QAAIP,OAAJ,EAAa;AACXC,MAAAA,SAAS;AACV;;AAED,WAAO,MAAM;AACXD,MAAAA,OAAO,GAAG,KAAV;AACAF,MAAAA,UAAU,CAACY,KAAX;AACD,KAHD;AAID,GA3BD,EA2BG,CAAC7B,GAAD,CA3BH;AA8BA,QAAM8B,QAAQ,GAAG;AACbvB,IAAAA,IADa;AAEbG,IAAAA,OAFa;AAGbE,IAAAA,SAHa;AAIbE,IAAAA;AAJa,GAAjB;AAOA,SAAOgB,QAAP;AACD,CA3CI;;GAAMxB,W","sourcesContent":["import React from \"react\";\n\nconst API = async (url, abortSignal) => {\n    const response = await fetch(url, { signal: abortSignal });\n    return response.json();\n  };\n\nexport const useStateAPI = (url) => {\n    const [name, setName] = React.useState(null);\n    const [profile, setProfile] = React.useState(null);\n    const [biography, setBiography] = React.useState(null);\n    const [external_url, setExternal_url] = React.useState(null);\n    React.useEffect(() => {\n      // This is the abort controller that will cancel the fetch if the component was unmounted\n      const controller = new AbortController();\n      const signal = controller.signal;\n  \n      let mounted = true;\n  \n      const fetchData = async () => {\n        try {\n          const data = await API(url, signal);\n          setName(data.graphql.user.username);\n          setProfile(data.graphql.user.profile_pic_url);\n          setBiography(data.graphql.user.biography);\n          setExternal_url(data.graphql.user.external_url);\n        } catch (e) {\n            console.log(e)\n        }\n      };\n      // it will fetch data only on mount so that\n      if (mounted) {\n        fetchData();\n      }\n  \n      return () => {\n        mounted = false;\n        controller.abort();\n      };\n    }, [url]);\n\n\n    const userData = {\n        name,\n        profile,\n        biography,\n        external_url    \n    }\n  \n    return userData;\n  };\n  "]},"metadata":{},"sourceType":"module"}